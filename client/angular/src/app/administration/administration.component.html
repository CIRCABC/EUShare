<div class="centered">
  <h1 class="title">{{ "administration" | transloco }}</h1>
  <div class="columns">
    <div class="column is-one-half">
      <label class="label">{{ "user.search" | transloco }}</label>
      <input
        [(ngModel)]="searchString"
        class="input"
        type="text"
        [attr.placeholder]="'user.name.or.email' | transloco"
      />
      <a
        class="button"
        [class.is-loading]="searchIsLoading"
        (click)="search()"
        >{{ "search" | transloco }}</a
      >
      <div *ngIf="isAfterSearch">
        <label class="label">{{ "results" | transloco }}</label>
        <ul class="menu-list">
          <li
            *ngFor="let userInfo of userInfoArray; let i = index"
            [attr.data-index]="i"
            value="userInfo.id"
            (click)="displayUserInfoNumber(i)"
          >
            <a> {{ userInfo.givenName }}</a>
          </li>
        </ul>
        <nav
          class="pagination is-centered"
          role="navigation"
          aria-label="pagination"
        >
          <a
            *ngIf="pageNumber > 0"
            class="pagination-previous button"
            (click)="resultsPreviousPage()"
            >{{ "previous" | transloco }}</a
          >
          <a
            *ngIf="hasNextPage"
            class="pagination-next button"
            (click)="resultsNextPage()"
            >{{ "next.page" | transloco }}</a
          >
        </nav>
      </div>
    </div>
    <div class="column is-one-half">
      <div *ngIf="isAfterSearch && isAfterSelected">
        <div>
          <label class="label">{{ "user.info" | transloco }}</label>
          <p *ngIf="!isChangePermissions && !selectedUserInfo.isAdmin">
            Internal user: {{ selectedUserInfo.givenName }}
            <fa-icon [icon]="faUser"></fa-icon>
          </p>
          <p *ngIf="!isChangePermissions && selectedUserInfo.isAdmin">
            {{ "admin.user" | transloco }}: {{ selectedUserInfo.givenName }}
            <fa-icon [icon]="faUserTie"></fa-icon>
          </p>
          <div class="select" *ngIf="isChangePermissions">
            <select [(ngModel)]="selectedIsAdminValue">
              <option [ngValue]="false">Internal user</option>
              <option [ngValue]="true" selected>Admin user</option>
            </select>
          </div>
          <br *ngIf="isChangePermissions" />
          <p *ngIf="!isChangePermissions">
            {{ "total.space" | transloco }}:
            {{ selectedUserInfo.totalSpace | fileSizeFormat }}
          </p>
          <div class="select" *ngIf="isChangePermissions">
            <select [(ngModel)]="selectedValueInGigaBytes">
              <option
                *ngFor="let valueInGig of valuesInGigaBytes; let i = index"
                [attr.data-index]="i"
                [selected]="i === selectedValueInGigaBytesIndex"
                [ngValue]="valueInGig"
              >
                {{ "total.space" | transloco }}: {{ valueInGig }} GB
              </option>
            </select>
          </div>
          <p>
            {{ "used.space" | transloco }}:
            {{ selectedUserInfo.usedSpace | fileSizeFormat }}
          </p>
          <p>
            {{ "free.space" | transloco }}::
            {{
              selectedUserInfo.totalSpace - selectedUserInfo.usedSpace
                | fileSizeFormat
            }}
          </p>
        </div>
        <a
          *ngIf="isChangePermissions"
          class="button"
          [class.is-loading]="changeIsLoading"
          (click)="changePermissions()"
          >{{ "done" | transloco }}</a
        >
        <a
          *ngIf="isChangePermissions"
          class="button buttonMargin"
          (click)="toggleChangePermissions()"
          >{{ "cancel" | transloco }}</a
        >
        <a
          *ngIf="!isChangePermissions"
          class="button"
          (click)="toggleChangePermissions()"
          >{{ "change.permissions" | transloco }}</a
        >
        <a
          *ngIf="!isChangePermissions"
          class="button buttonMargin"
          (click)="goToUserUploadedFiles()"
          >{{ "display.shared.files" | transloco }}</a
        >
      </div>
    </div>
  </div>
</div>
